.well.well-small.read-file
  .row-fluid
    .span6
      %h2= @current_file[:name]
    .span6
      .btn-group.pull-right
        = link_to raw('<i class="icon-edit"></i> Edit'), '#', class: 'btn btn-primary' if @current_file[:mime_category] == 'text' && user_signed_in?
        = link_to raw('<i class="icon-download-alt"></i> Download'), raw_repository_path(@repository, @url), class: 'btn'
        = link_to 'History', '#', class: 'btn'
        = link_to raw('<i class="icon-trash"></i> Delete'), delete_file_repository_path(@repository.path, @url), method: :delete,
              'data-confirm' => "Are you sure to delete the file #{@current_file[:name]}?", 
              'data-head' => 'Delete file', class: 'btn delete-confirm' if user_signed_in?
  .clearfix
  - case @current_file[:mime_category]
  - when 'text'
    - if @current_file[:size] <= 524288
      .file-content
        %pre
          = @current_file[:content]
    - else 
      .alert.alert-info
        File too large to display.
      = link_to raw('<i class="icon-download-alt"></i> Download'), raw_repository_path(@repository, @url), class: 'btn'
  - when 'image'
    .image-content
      = image_tag raw_repository_path(@repository, @url), alt: @current_file[:name]
  - else 
    .alert.alert-info
      Cannot display this filetype.
    = link_to raw('<i class="icon-download-alt"></i> Download'), raw_repository_path(@repository, @url), class: 'btn'
